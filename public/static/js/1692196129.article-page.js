import{r as l,h as a,p as e,u as s,m as t,a as o,B as n,o as c,c as i,C as u,e as d,b as r,d as m,w as p,f as b,F as v,j as f,k as g,t as h}from"./1692196129.index.js";const w={class:"card"},y={class:"card-body"},x={class:"text-muted text-uppercase mt-0"},k=r("br",null,null,-1),j=r("br",null,null,-1),V={class:"d-inline-flex align-items-center"},_=r("span",{class:"ms-1"},"文章、页面",-1),C={class:"m-b-20"},M=r("span",{class:"badge bg-success font-white"}," 更多 ",-1),T={class:"text-muted"},z=r("strong",{class:"flex-center"},"文章 和 页面 详细配置",-1),E={class:"row"},L={class:"col-md-4"},U={class:"form-group mb-3"},A={class:"form-label"},I=r("br",null,null,-1),R=r("br",null,null,-1),H=r("span",{class:"ms-1"},"编辑器：",-1),J={class:"font-13"},N={class:"text-muted float-end"},O={class:"col-md-4"},S={class:"form-group mb-3"},B={class:"form-label"},F=r("span",{class:"ms-1"},"允许评论：",-1),q={class:"font-13"},D={class:"text-muted float-end"},G={class:"col-md-4"},K={class:"form-group mb-3"},P={class:"form-label"},Q=r("span",{class:"ms-1"},"显示评论：",-1),W={class:"font-13"},X={class:"text-muted float-end"},Y={__name:"article-page",setup(Y,{expose:Z}){const $=l({struct:{key:"ARTICLE",json:{editor:"tinymce",comment:{allow:1,show:1}}},status:{finish:!1,loading:!0,dialog:!1},select:{editor:[{value:"tinymce",label:"富文本"},{value:"vditor",label:"Markdown"}],comment:{allow:[{value:1,label:"允许"},{value:0,label:"禁止"}],show:[{value:1,label:"显示"},{value:0,label:"隐藏"}]}}});a((async()=>{await ll.init()}));const ll={init:async()=>{$.status.finish=!1,$.status.loading=!0;const{code:l,data:a}=await e.get("/api/config/one",{key:"ARTICLE"});$.status.loading=!1,200===l&&($.struct=s.deepMerge($.struct,a),$.status.finish=!0)},change:async l=>{const{code:a,msg:s}=await e.post("/api/config/save",{key:"ARTICLE",json:JSON.stringify({...$.struct.json,editor:l})});200!==a&&($.struct.json.editor="tinymce"===$.struct.json.editor?"vditor":"tinymce",t.error(s))},show(){if(!$.status.finish)return t.warn("配置获取失败，无法进行配置！");$.status.dialog=!0},save:async()=>{$.status.wait=!0;const{code:l,msg:a}=await e.post("/api/config/save",{...$.struct,json:JSON.stringify($.struct.json)});if($.status.wait=!1,200!==l)return t.error("保存失败："+a);$.status.dialog=!1}};return Z({init:ll.init}),(l,a)=>{const e=o("i-svg"),s=o("el-tooltip"),t=o("el-switch"),Y=o("el-option"),Z=o("el-select"),al=o("el-button"),el=o("el-dialog"),sl=n("load");return c(),i(v,null,[u((c(),i("div",w,[r("div",y,[m(e,{name:"editor",color:"rgb(var(--assist-color))",size:"43px",class:"position-absolute opacity-25",style:{right:"2rem"}}),r("h6",x,[m(s,{placement:"top"},{content:p((()=>[b(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"),k,b(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。"),j])),default:p((()=>[r("span",V,[m(e,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),_])])),_:1})]),r("h2",C,[m(t,{modelValue:d($).struct.json.editor,"onUpdate:modelValue":a[0]||(a[0]=l=>d($).struct.json.editor=l),onChange:ll.change,disabled:!d($).status.finish,"active-value":"tinymce","inactive-value":"vditor","active-text":"富文本","inactive-text":"Markdown"},null,8,["modelValue","onChange","disabled"])]),M,r("span",T,[b(" 其它配置信息，"),r("span",{onClick:a[1]||(a[1]=l=>ll.show()),class:"text-white pointer"},"点我配置")])])])),[[sl,[d($).status.loading,null,null]]]),m(el,{modelValue:d($).status.dialog,"onUpdate:modelValue":a[7]||(a[7]=l=>d($).status.dialog=l),class:"custom",draggable:"","close-on-click-modal":!1},{header:p((()=>[z])),default:p((()=>[r("div",E,[r("div",L,[r("div",U,[r("label",A,[m(s,{placement:"top"},{content:p((()=>[b(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"),I,b(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。"),R])),default:p((()=>[r("span",null,[m(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),H])])),_:1})]),m(Z,{modelValue:d($).struct.json.editor,"onUpdate:modelValue":a[2]||(a[2]=l=>d($).struct.json.editor=l),class:"d-block custom font-13",placeholder:"请选择"},{default:p((()=>[(c(!0),i(v,null,f(d($).select.editor,(l=>(c(),g(Y,{key:l.value,label:l.label,value:l.value},{default:p((()=>[r("span",J,h(l.label),1),r("small",N,h(l.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),r("div",O,[r("div",S,[r("label",B,[m(s,{content:"是否允许用户评论",placement:"top"},{default:p((()=>[r("span",null,[m(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),F])])),_:1})]),m(Z,{modelValue:d($).struct.json.comment.allow,"onUpdate:modelValue":a[3]||(a[3]=l=>d($).struct.json.comment.allow=l),class:"d-block custom font-13",placeholder:"请选择"},{default:p((()=>[(c(!0),i(v,null,f(d($).select.comment.allow,(l=>(c(),g(Y,{key:l.value,label:l.label,value:l.value},{default:p((()=>[r("span",q,h(l.label),1),r("small",D,h(l.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),r("div",G,[r("div",K,[r("label",P,[m(s,{content:"是否显示评论",placement:"top"},{default:p((()=>[r("span",null,[m(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Q])])),_:1})]),m(Z,{modelValue:d($).struct.json.comment.show,"onUpdate:modelValue":a[4]||(a[4]=l=>d($).struct.json.comment.show=l),class:"d-block custom font-13",placeholder:"请选择"},{default:p((()=>[(c(!0),i(v,null,f(d($).select.comment.show,(l=>(c(),g(Y,{key:l.value,label:l.label,value:l.value},{default:p((()=>[r("span",W,h(l.label),1),r("small",X,h(l.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])])])),footer:p((()=>[m(al,{onClick:a[5]||(a[5]=l=>d($).status.dialog=!1)},{default:p((()=>[b("取 消")])),_:1}),m(al,{onClick:a[6]||(a[6]=l=>ll.save()),loading:d($).status.wait},{default:p((()=>[b("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}};export{Y as _};
